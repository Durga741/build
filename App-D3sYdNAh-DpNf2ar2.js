import{u as S,a as A,b as B,r as m,c as F,P as O,j as e,d as l,L as u,F as C,T as H,e as N,f as D,g as v,h as c,i as U,k as h,l as G,I as f,m as W,n as Q,E as _,D as q,C as z,o as J,p as K}from"./strapi-BDL4OyES.js";import{u as X,a as Y,b as Z,g as a}from"./getTrad-BCVqzyys-DMFQkwDM.js";const te=()=>{const{formatMessage:n}=S(),{toggleNotification:i}=A(),{formatAPIError:x}=B(),{data:t,isLoading:b,isError:P}=X(),[R]=Y(),[y]=Z(),[d,g]=m.useState(!1),[p,M]=m.useState(),{allowedActions:o,isLoading:L}=F(O),$=b||L,T=4,k=(t?.docVersions?.length||0)+1,I=s=>{R({version:s}).unwrap().then(()=>{i({type:"success",message:n({id:a("notification.generate.success"),defaultMessage:"Successfully generated documentation"})})}).catch(r=>{i({type:"warning",message:x(r)})})},V=async()=>{p&&(await y({version:p}).unwrap().then(()=>{i({type:"success",message:n({id:a("notification.delete.success"),defaultMessage:"Successfully deleted documentation"})})}).catch(s=>{i({type:"warning",message:x(s)})}),g(!d))},E=s=>{M(s),g(!d)},j=n({id:a("plugin.name"),defaultMessage:"Documentation"});return $?e.jsx(l.Loading,{}):P?e.jsx(l.Error,{}):e.jsxs(u.Root,{children:[e.jsx(l.Title,{children:j}),e.jsxs(l.Main,{children:[e.jsx(u.Header,{title:j,subtitle:n({id:a("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.jsx(ee,{disabled:!o.canRead||!t?.currentVersion||!t?.prefix,href:w(`${t?.prefix}/v${t?.currentVersion}`),startIcon:e.jsx(C,{}),children:n({id:a("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),e.jsx(u.Content,{children:t?.docVersions.length?e.jsxs(H,{colCount:T,rowCount:k,children:[e.jsx(N,{children:e.jsxs(D,{children:[e.jsx(v,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:n({id:a("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),e.jsx(v,{children:e.jsx(c,{variant:"sigma",textColor:"neutral600",children:n({id:a("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),e.jsx(U,{children:t.docVersions.slice(0).sort((s,r)=>s.generatedDate<r.generatedDate?1:-1).map(s=>e.jsxs(D,{children:[e.jsx(h,{width:"50%",children:e.jsx(c,{children:s.version})}),e.jsx(h,{width:"50%",children:e.jsx(c,{children:s.generatedDate})}),e.jsx(h,{children:e.jsxs(G,{justifyContent:"end",onClick:r=>r.stopPropagation(),children:[e.jsx(f,{tag:"a",disabled:!o.canRead,href:w(`${t.prefix}/v${s.version}`),variant:"ghost",target:"_blank",rel:"noopener noreferrer",label:n({id:a("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${s.version}`}),children:e.jsx(C,{})}),o.canRegenerate?e.jsx(f,{onClick:()=>I(s.version),variant:"ghost",label:n({id:a("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${s.version}`}),children:e.jsx(W,{})}):null,o.canUpdate&&s.version!==t.currentVersion?e.jsx(f,{onClick:()=>E(s.version),variant:"ghost",label:n({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${s.version}`}),children:e.jsx(Q,{})}):null]})})]},s.version))})]}):e.jsx(_,{content:"",icon:null})}),e.jsx(q.Root,{open:d,onOpenChange:g,children:e.jsx(z,{onConfirm:V})})]})]})},ee=J(K)`
  text-decoration: none;
`,w=n=>n.startsWith("http")?n:n.startsWith("/")?`${window.strapi.backendURL}${n}`:`${window.strapi.backendURL}/${n}`;export{te as App};
